{% extends 'base.html.twig' %}

{% block title %}
  {{ pin.title }}
{% endblock %}

{% block body %}
  <div class="row">
    <div class="col-md-6 mx-auto">
      <article class="pin bg-white rounded shadow">
        <div class="rounded-top mw-100 overflow-hidden">
          <img src="{{ (pin.imageName
              ? vich_uploader_asset(pin)
              : asset('images/placeholder.jpg'))|imagine_filter(
              'square_thumbnail_medium'
            ) }}"
            alt="{{ pin.title }}"
            class="w-100" />
        </div>

        <div class="p-3">
          <h5 class="text-secondary">
            {{ pin.title }}
          </h5>
          <p class="text-muted">
            <small>
              Submitted {{ pin.createdAt|ago }} by {{ pin.user.fullName }}
            </small>
          </p>
          <p class="text-break">
            {{ pin.description }}
          </p>
          <a class="btn-grad"
            href="{{
            path(
              'app_pin_edit',
              {
                id: pin.id
              }
            )
            }}">
            Edit
          </a>
          <a class="btn-grad"
            href="#"
            onclick="event.preventDefault(); confirm('Are you sure?') && document.getElementById('js-delete-pin-form').submit();">
            Delete
          </a>

          <form id="js-delete-pin-form"
            action="{{
            path(
              'app_pin_delete',
              {
                id: pin.id
              }
            )
            }}"
            method="post"
            style="display:none;">
            <input type="hidden"
              name="csrf_token"
              value="{{ csrf_token('pin_delete_' ~ pin.id) }}" />
            <input type="hidden" name="_method" value="DELETE" />
          </form>
        </div>
      </article>
    </div>
  </div>
{% endblock %}
